schema_version: 1

from: "registry-proxy.engineering.redhat.com/rh-osbs/amq-broker-7-amq-broker-75-openj9-11-rhel8:7.5-19"
name: &name "amq-broker-7/amq-broker-75-openshift-openj9-11-rhel8"
version: &version "7.5"

labels:
- name: "com.redhat.component"
  value: "amq-broker-openshift-openj9-11-rhel8-container"

envs:
- name: "JBOSS_IMAGE_NAME"
  value: *name
- name: "JBOSS_IMAGE_VERSION"
  value: *version

modules:
      repositories:
          - path: modules
          - name: cct_module
            git:
                 url: https://github.com/artemiscloud/cct_module.git
                 ref: 0.38.0-amq
      install:
          - name: dynamic-resources
          - name: os-amq-s2i
          - name: os-java-run
          - name: openshift-passwd
          - name: os-logging
          - name: os-amq-permissions
          - name: os-java-jolokia
          - name: amq.broker75.jolokia.access
          - name: amq.broker75.launch
          - name: amq.broker75.s2i
          - name: amq.custom.config   

packages:
    install:
        - openssl
        - apr

osbs:
  configuration:
    container:
      platforms:
        only:
          - s390x
      compose:
        pulp_repos: true
        include_unpublished_pulp_repos: false
        signing_intent: release
  repository:
    name: containers/amq-broker
    branch: amq-broker-7.5-openshift-openj9-11-rhel8

